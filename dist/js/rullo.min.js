const e={loaded:!0,create:t=>{let s="";for(let n=0;n<t;n++)s+=e.makeRow(t);let n=e.makeCol(t);return`\n        ${n}\n        ${s}\n        ${n}\n    `},makeCol:t=>`\n        <div class="cols">\n            ${e.makeSums(t)}\n        </div>\n    `,makeSums:e=>{let t="";for(let s=0;s<e;s++)t+='<div class="sum"></div>';return t},makeRow:t=>`\n    <div class="row">\n        <div class="sum"></div>\n        ${e.makeCells(t)}\n        <div class="sum"></div>\n    </div>\n    `,makeCells:e=>{let t="";for(let s=0;s<e;s++)t+='<div class="cell"></div>';return t}};let t={loaded:!1,load:(s,n,r)=>{if(t.loaded)return;var a=document.getElementsByClassName("game")[0];a.innerHTML=e.create(s);let l=t.inWords(s);console.log(l),a.classList.add(l.trim()),t.loaded=!0;let o=[];for(let e=0;e<s*s;e++)o.push(t.random(n,r));let i=t.punch([...o]),{rows:c,cols:d}=t.solve(s,i);return{matrix:o,rows:c,cols:d}},random:(e,t)=>{const s=Math.ceil(e),n=Math.floor(t)+1;return Math.floor(Math.random()*(n-s)+s)},solve:(e,s)=>{let n=parseInt(e),r=s,a=[],l=[];for(let s=0;s<e;s++){let o=r.slice(s*n,s*n+n),i=t.col(r,e,s);a.push(t.sum(o)),l.push(t.sum(i))}return{rows:a,cols:l}},sum:e=>e.reduce(((e,t)=>e+t),0),col:(e,t,s)=>e.filter(((e,n)=>n===s||n%t===s)),punch:e=>{let s=Math.floor(t.random(25,50)/100*e.length),n=e;for(;s>1;){let e=t.random(0,n.length);0!=n[e]&&(n[e]=0,s--)}return n},inWords:e=>{let t,s=["","one ","two ","three ","four ","five ","six ","seven ","eight ","nine ","ten ","eleven ","twelve ","thirteen ","fourteen ","fifteen ","sixteen ","seventeen ","eighteen ","nineteen "],n=["","","twenty","thirty","forty","fifty","sixty","seventy","eighty","ninety"];if((e=e.toString()).length>9)return"overflow";if(t=("000000000"+e).substr(-9).match(/^(\d{2})(\d{2})(\d{2})(\d{1})(\d{2})$/),t){var r="";return r+=0!=t[1]?(s[Number(t[1])]||n[t[1][0]]+" "+s[t[1][1]])+"crore ":"",r+=0!=t[2]?(s[Number(t[2])]||n[t[2][0]]+" "+s[t[2][1]])+"lakh ":"",r+=0!=t[3]?(s[Number(t[3])]||n[t[3][0]]+" "+s[t[3][1]])+"thousand ":"",r+=0!=t[4]?(s[Number(t[4])]||n[t[4][0]]+" "+s[t[4][1]])+"hundred ":"",r+=0!=t[5]?(""!=r?"and ":"")+(s[Number(t[5])]||n[t[5][0]]+" "+s[t[5][1]]):""}}},s={loaded:!1,check:e=>{let t=s.row(e),n=s.col(e);for(let s of r(e.target))t?s.classList.add("success"):s.classList.remove("success");for(let t of l(e.target))n?t.classList.add("success"):t.classList.remove("success")},row:e=>{let t,s,r;t=e.target.classList.contains("inactive")?0:parseInt(e.target.innerHTML);for(let r of n(e.target))r.classList.contains("inactive")||r.classList.contains("sum")?r.classList.contains("sum")?s=parseInt(r.innerHTML):console.log():t+=parseInt(r.innerHTML);return r=t===s,r},col:e=>{let t,s,n=0;var r=Array.from(e.target.parentNode.children).indexOf(e.target)-1;t=parseInt(document.querySelector(".cols").children.item(r).innerHTML);for(let t of a(e.target))t.classList.contains("inactive")||(n+=parseInt(t.innerHTML));return s=n===t,s}},n=e=>{let t=[],s=e.parentNode.firstChild;for(;s;)1===s.nodeType&&s!==e&&t.push(s),s=s.nextSibling;return t},r=e=>{let t=[];for(let s of n(e))s.classList.contains("sum")&&t.push(s);return t},a=e=>{let t=[];var s=Array.from(e.parentNode.children).indexOf(e);for(let e of document.getElementsByClassName("row")){let n=e.children;t.push(n.item(s))}return t},l=e=>{let t=[];var s=Array.from(e.parentNode.children).indexOf(e)-1;for(let e of document.getElementsByClassName("cols"))t.push(e.children.item(s));return t},o={loaded:!1,setup:(e,t)=>{},click:()=>{let e=document.getElementsByClassName("cell");Array.from(e).forEach(((e,t)=>{e.addEventListener("click",(e=>{e.target.classList.toggle("inactive"),s.check(e)}))}))},load:(e,t,s)=>{let n=document.getElementsByClassName("cell");Array.from(n).forEach(((t,s)=>{t.innerHTML=e[s]}));for(let e of document.getElementsByClassName("cols"))Array.from(e.children).forEach(((e,t)=>{e.innerHTML=s[t]}));for(let e of document.getElementsByClassName("row")){let s=t.shift();for(let t of e.getElementsByClassName("sum"))t.innerHTML=s}o.click()}},i={loaded:!1,timers:[]};function c(e,t){return e.toLocaleString("en-US",{minimumIntegerDigits:t,useGrouping:!1})}i.start=e=>{i.startTime=new Date,i.startTime.setSeconds(i.startTime.getSeconds()+parseInt(e))},i.initialize=e=>{for(let e of document.getElementsByClassName("timer"))i.timers.push(e);i.start(e),i.interval=setInterval(i.loop,1e3)},i.loop=()=>{var e=(new Date).getTime();let t=i.startTime-e;if(t<=1)i.hide(),i.clear();else{let e=Math.floor(t%36e5/6e4),s=Math.floor(t%6e4/1e3);for(let t of i.timers){let n=e>0?e+":"+c(s,2):"0:"+c(s,2);t.innerHTML=n}}},i.clear=()=>{clearInterval(i.interval)},i.hide=()=>{for(let e of i.timers)e.classList.add("hidden")};const d={size:null,sequenceStart:null,sequenceEnd:null,setSize:e=>{d.size=e;for(let e of document.getElementsByClassName("selection size"))e.classList.toggle("hidden");d.allSet()},setSequence:(e,t)=>{d.sequenceStart=e,d.sequenceEnd=t;for(let e of document.getElementsByClassName("selection sequence"))e.classList.toggle("hidden");d.allSet()},sizeClick:()=>{for(let e of document.getElementsByClassName("selection size"))e.addEventListener("click",(function(e){e.target.dataset.size&&d.setSize(e.target.dataset.size)}))},sequenceClick:()=>{for(let e of document.getElementsByClassName("selection sequence"))e.addEventListener("click",(function(e){e.target.dataset.sequenceStart&&e.target.dataset.sequenceEnd&&d.setSequence(e.target.dataset.sequenceStart,e.target.dataset.sequenceEnd)}))},onLoad:()=>{const e=document.body;e.dataset,"timer"in e.dataset&&i.initialize(e.dataset.timer),"size"in e.dataset&&d.setSize(e.dataset.size),"sequenceStart"in e.dataset&&"sequenceEnd"in e.dataset&&d.setSequence(e.dataset.sequenceStart,e.dataset.sequenceEnd),d.size&&d.sequenceStart&&d.sequenceEnd?d.allSet():d.size?d.sequenceClick():(d.sequenceStart&&d.sequenceEnd||d.sequenceClick(),d.sizeClick())},allSet:()=>{if(d.size&&d.sequenceStart&&d.sequenceEnd&&!t.loaded){let{matrix:e,rows:s,cols:n}=t.load(d.size,d.sequenceStart,d.sequenceEnd);o.load(e,s,n)}}};window.onload=function(){d.onLoad()};
